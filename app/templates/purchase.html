
{% extends "base.html" %}
{% block section %}
<h2>Compra / Tradeo de Criptomonedas</h2>

<form method="POST">
  <label for="from_currency">Desde (From):</label>
  <select name="from_currency" required>
    {% for moneda in monedas_disponibles %}
      <option value="{{ moneda }}" {% if moneda == moneda_from %}selected{% endif %}>{{ moneda }}</option>
    {% endfor %}
  </select>

  <label for="amount">Cantidad a gastar (Q):</label>
  <input type="number" step="any" min="0" name="amount" value="{{ cantidad_from or '' }}" required>

  <label for="to_currency">Hacia (To):</label>
  <select name="to_currency" required>
    {% for moneda in monedas_disponibles %}
      <option value="{{ moneda }}" {% if moneda == moneda_to %}selected{% endif %}>{{ moneda }}</option>
    {% endfor %}
  </select>

  <div style="margin-top: 1em;">
    <button type="submit" name="action" value="calcular">Calcular</button>
    <button type="submit" name="action" value="aceptar">Aceptar</button>
  </div>
</form>

{% if cantidad_to %}
  <p style="margin-top: 1em;">
    ✅ Con <strong>{{ cantidad_from }}</strong> {{ moneda_from }} obtendrás aproximadamente <strong>{{ cantidad_to | round(6) }}</strong> {{ moneda_to }}.
  </p>
{% endif %}

{% endblock %}
